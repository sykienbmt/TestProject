{"ast":null,"code":"import _objectSpread from \"/home/kien/HocTap/TestProject2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/kien/HocTap/TestProject2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kien/HocTap/TestProject2/src/page/shop/ShopPage.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { productController } from '../../controller/ProductController';\nimport { getListFromLocal, setCartsToLocal } from '../../model/ItemCart';\nimport PaginationItem from './Pagination';\nimport ShopItem from './ShopItem';\nimport './ShopPage.css';\nexport default function ProductsShow(props) {\n  var _this = this;\n\n  var _useState = useState({\n    listShow: [],\n    inputSearch: \"\",\n    currentPage: 1,\n    totalPage: [],\n    carts: getListFromLocal(),\n    countItemCart: getListFromLocal().length,\n    pagination: {\n      page: 1,\n      filter: \"\",\n      perPage: 5,\n      search: \"\"\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    productController.query(state.pagination).then(function (res) {\n      return setState(_objectSpread({}, state, {\n        listShow: res.products,\n        totalPage: res.totalPage\n      }));\n    });\n  }, []);\n\n  var onCLickSearch = function onCLickSearch() {\n    // let pagination:Pagination = {search:state.inputSearch}\n    var pagi = state.pagination;\n    pagi.perPage = 1;\n    setState(_objectSpread({}, state, {\n      pagination: pagi\n    }));\n    productController.query(state.pagination).then(function (res) {\n      return setState(_objectSpread({}, state, {\n        listShow: res.products,\n        totalPage: res.totalPage,\n        pagination: pagi\n      }));\n    });\n  };\n\n  var _onClickAddToCart = function onClickAddToCart(id) {\n    var findIndex = state.carts.find(function (item) {\n      return item.id === id;\n    });\n    var list = state.carts;\n    var indexList = state.listShow.findIndex(function (item) {\n      return item.id === id;\n    });\n\n    if (findIndex) {\n      var index = state.carts.findIndex(function (item) {\n        return item.id === id;\n      });\n      state.carts[index].quantity = +list[index].quantity + 1;\n      state.carts[index].id = id;\n    } else {\n      var newItemCart = {\n        id: id,\n        quantity: 1,\n        name: state.listShow[indexList].name,\n        price: state.listShow[indexList].price,\n        image: state.listShow[indexList].image\n      };\n      list.push(newItemCart);\n    }\n\n    setState(_objectSpread({}, state, {\n      carts: list,\n      countItemCart: list.length\n    }));\n    setCartsToLocal(list);\n  };\n\n  var sortArray = function sortArray(e) {\n    var listSort = state.listShow.slice();\n\n    if (e === \"AZ\") {\n      setState(_objectSpread({}, state, {\n        listShow: listSort.sort(function (a, b) {\n          return a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1;\n        })\n      }));\n    } else if (e === \"ZA\") {\n      setState(_objectSpread({}, state, {\n        listShow: listSort.sort(function (a, b) {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? 1 : -1;\n        })\n      }));\n    } else if (e === \"Ascend\") {\n      setState(_objectSpread({}, state, {\n        listShow: listSort.sort(function (a, b) {\n          return a.price > b.price ? 1 : -1;\n        })\n      }));\n    } else if (e === \"Descend\") {\n      setState(_objectSpread({}, state, {\n        listShow: listSort.sort(function (a, b) {\n          return a.price < b.price ? 1 : -1;\n        })\n      }));\n    } else {\n      setState(_objectSpread({}, state, {\n        listShow: state.listShow\n      }));\n    }\n  };\n\n  var setPage = function setPage(pagination) {\n    productController.query(pagination).then(function (res) {\n      return setState(_objectSpread({}, state, {\n        listShow: res.products,\n        totalPage: res.totalPage,\n        pagination: pagination,\n        currentPage: Number(pagination.page)\n      }));\n    });\n  };\n\n  var onClickNextPage = function onClickNextPage() {\n    var pagi = state.pagination;\n    pagi.page = Number(state.pagination.page) + 1;\n\n    if (pagi.page > state.totalPage.length) {\n      pagi.page = state.totalPage.length;\n    }\n\n    setState(_objectSpread({}, state, {\n      pagination: pagi\n    }));\n    productController.query(state.pagination).then(function (res) {\n      return setState(_objectSpread({}, state, {\n        listShow: res.products,\n        totalPage: res.totalPage,\n        pagination: pagi,\n        currentPage: Number(pagi.page)\n      }));\n    });\n  };\n\n  var onClickPrevPage = function onClickPrevPage() {\n    var pagi = state.pagination;\n    pagi.page = Number(state.pagination.page) - 1;\n\n    if (pagi.page < 1) {\n      pagi.page = 1;\n    }\n\n    setState(_objectSpread({}, state, {\n      pagination: pagi\n    }));\n    productController.query(state.pagination).then(function (res) {\n      return setState(_objectSpread({}, state, {\n        listShow: res.products,\n        totalPage: res.totalPage,\n        pagination: pagi,\n        currentPage: Number(pagi.page)\n      }));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"shopping-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shop-show\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"group-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"search-product\",\n    placeholder: \"Search\",\n    onChange: function onChange(e) {\n      return setState(_objectSpread({}, state, {\n        inputSearch: e.target.value\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: onCLickSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, \"Search\")), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"dropdown\",\n    onChange: function onChange(e) {\n      return sortArray(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"N/A\",\n    className: \"txtSort\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, \"Sort\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"AZ\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, \"Name: A-Z\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"ZA\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, \"Name: Z-A\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Ascend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, \"Price: Ascending\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Descend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, \"Price: Descending\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shop-list-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, state.listShow.map(function (item) {\n    return /*#__PURE__*/React.createElement(ShopItem, {\n      key: item.id,\n      product: item // onClickAddToCart={props.onClickAddToCart}\n      ,\n      onClickAddToCart: function onClickAddToCart() {\n        return _onClickAddToCart(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 49\n      }\n    });\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shop-pagination-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pagination-prev btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, \" Back \"), state.totalPage.map(function (item) {\n    return /*#__PURE__*/React.createElement(PaginationItem, {\n      key: item,\n      page: item,\n      setPage: setPage,\n      currentPage: state.currentPage,\n      paginationInfo: state.pagination,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 53\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, \"...\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pagination-next btn\",\n    onClick: onClickNextPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, \"Next\")));\n}","map":{"version":3,"sources":["/home/kien/HocTap/TestProject2/src/page/shop/ShopPage.tsx"],"names":["React","useEffect","useState","productController","getListFromLocal","setCartsToLocal","PaginationItem","ShopItem","ProductsShow","props","listShow","inputSearch","currentPage","totalPage","carts","countItemCart","length","pagination","page","filter","perPage","search","state","setState","query","then","res","products","onCLickSearch","pagi","onClickAddToCart","id","findIndex","find","item","list","indexList","index","quantity","newItemCart","name","price","image","push","sortArray","e","listSort","slice","sort","a","b","toLowerCase","setPage","Number","onClickNextPage","onClickPrevPage","target","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { productController } from '../../controller/ProductController'\nimport {ItemCart, getListFromLocal, setCartsToLocal } from '../../model/ItemCart'\nimport { Pagination } from '../../model/Pagination'\nimport { Product } from '../../model/Product'\nimport PaginationItem from './Pagination'\nimport ShopItem from './ShopItem'\nimport './ShopPage.css'\n\ninterface Props{\n    // listProduct:Product[]\n    // onClickAddToCart:(id:String)=>void\n}\n\ninterface State{\n    listShow:Product[],\n    inputSearch:string,\n    currentPage:number,\n    totalPage:number[],\n    carts:ItemCart[],\n    countItemCart:number,\n    pagination:Pagination\n}\n\nexport default function ProductsShow(props:Props) {\n\n    const [state,setState]=useState<State>({\n        listShow:[],\n        inputSearch:\"\",\n        currentPage:1,\n        totalPage:[],\n        carts:getListFromLocal(),\n        countItemCart:getListFromLocal().length,\n        pagination:{page:1,filter:\"\",perPage:5,search:\"\"}\n    })\n\n    useEffect(() => {\n        productController.query(state.pagination).then(res=>\n            setState({...state,listShow:res.products,totalPage:res.totalPage}\n        ))\n    }, [])\n    \n    const onCLickSearch=()=>{\n        // let pagination:Pagination = {search:state.inputSearch}\n        let pagi = state.pagination\n        pagi.perPage=1\n        setState({...state,pagination:pagi})\n\n        productController.query(state.pagination).then(res=>\n            setState({...state,listShow:res.products,totalPage:res.totalPage,pagination:pagi}\n        ))\n    }\n    \n    const onClickAddToCart = (id:string) => {\n\n        const findIndex=state.carts.find(item => item.id === id);\n        \n        const list:ItemCart[] = state.carts\n        let indexList = state.listShow.findIndex(item=>item.id===id)\n\n        if (findIndex) {\n          let index =state.carts.findIndex(item => item.id === id)\n          state.carts[index].quantity=+list[index].quantity + 1\n          state.carts[index].id=id\n\n        } else {\n          const newItemCart:ItemCart={\n              id:id,quantity:1,\n              name:state.listShow[indexList].name,\n              price:state.listShow[indexList].price,\n              image:state.listShow[indexList].image\n            }\n          list.push(newItemCart)\n        }\n        setState({...state,carts:list,countItemCart:list.length})\n        setCartsToLocal(list)\n\n      }\n\n    const sortArray =(e:any)=>{\n        const listSort= state.listShow.slice()\n        if(e===\"AZ\"){\n            setState({...state,\n                listShow: listSort.sort((a, b) => (a.name.toLowerCase()>b.name.toLowerCase()) ? 1 : -1)\n            })\n        }else if(e===\"ZA\"){\n            setState({...state,\n                listShow:listSort.sort((a, b) => (a.name.toLowerCase()<b.name.toLowerCase()) ? 1 : -1)\n            })\n        }else if(e===\"Ascend\"){\n            setState({...state,\n                listShow:listSort.sort((a, b) => (a.price > b.price) ? 1 : -1)\n            })\n        }else if(e===\"Descend\"){\n            setState({...state,\n                listShow:listSort.sort((a, b) => (a.price < b.price) ? 1 : -1)\n            })\n        }else{\n            setState({...state,listShow:state.listShow})\n        }\n    }\n\n\n    const setPage=(pagination:Pagination)=>{\n        \n        productController.query(pagination).then(res=>\n            setState({...state,listShow:res.products,totalPage:res.totalPage,pagination:pagination,currentPage:Number(pagination.page)}\n        ))\n    }\n\n    const onClickNextPage=()=>{\n        let pagi = state.pagination\n        pagi.page= Number(state.pagination.page)+1\n        if(pagi.page>state.totalPage.length){\n            pagi.page=state.totalPage.length\n        }\n        setState({...state,pagination:pagi})\n\n        productController.query(state.pagination).then(res=>\n            setState({...state,listShow:res.products,totalPage:res.totalPage,pagination:pagi,currentPage:Number(pagi.page)}\n        ))\n    }\n\n    const onClickPrevPage=()=>{\n        let pagi = state.pagination\n        pagi.page= Number(state.pagination.page)-1\n        if(pagi.page<1){\n            pagi.page=1\n        }\n        setState({...state,pagination:pagi})\n\n        productController.query(state.pagination).then(res=>\n            setState({...state,listShow:res.products,totalPage:res.totalPage,pagination:pagi,currentPage:Number(pagi.page)}\n        ))\n    }\n\n\n    return (\n        <div id=\"shopping-container\">\n            <div className=\"shop-show\">\n                <div className=\"title-bar\">\n                    <div className=\"group-search\">\n                        <input type=\"text\" className=\"search-product\" placeholder='Search' \n                                            onChange={e=> setState({...state,inputSearch:e.target.value})}/>\n                        <button className=\"btn\" onClick={onCLickSearch}>Search</button>\n                    </div>\n                    <select id=\"dropdown\" onChange={(e) => sortArray(e.target.value)}>\n                        <option value=\"N/A\" className=\"txtSort\">Sort</option>\n                        <option value=\"AZ\">Name: A-Z</option>\n                        <option value=\"ZA\">Name: Z-A</option>\n                        <option value=\"Ascend\">Price: Ascending</option>\n                        <option value=\"Descend\">Price: Descending</option>\n                    </select>\n                </div>\n                <div className=\"shop-list-container\">\n                    {state.listShow.map((item)=><ShopItem key={item.id}  product={item} \n                    // onClickAddToCart={props.onClickAddToCart}\n                    onClickAddToCart={()=>onClickAddToCart(item.id)}\n                    />)}\n                </div>\n            </div>\n            <div className=\"shop-pagination-container\">\n                    <button className=\"pagination-prev btn\"  > Back </button>\n                        \n                        {state.totalPage.map(item=> < PaginationItem key={item} page={item} setPage={setPage} currentPage={state.currentPage} paginationInfo={state.pagination}/>)}\n                        \n                        <span>...</span>\n                    <button className=\"pagination-next btn\" onClick={onClickNextPage}>Next</button>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}